<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Availability | Dialogika Internal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; letter-spacing: -0.01em; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        [x-cloak] { display: none !important; }
        .row-transition { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900" x-data="classManager()">

    <!-- TOP NAVIGATION -->
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold">D</div>
                <span class="font-bold text-slate-800 tracking-tight">Dialogika <span class="text-indigo-600">Ops</span></span>
            </div>
            <div class="flex items-center gap-4">
                <button class="text-slate-500 hover:text-slate-800 transition text-sm font-medium">Internal Docs</button>
                <div class="h-4 w-[1px] bg-slate-200"></div>
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-full bg-slate-200 border border-slate-300"></div>
                    <span class="text-xs font-semibold text-slate-600 uppercase">Sales Team</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-10">
        
        <!-- HEADER SECTION -->
        <header class="flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-10">
            <div>
                <nav class="flex gap-2 text-xs font-bold text-indigo-600 uppercase tracking-widest mb-2">
                    <span>Operational</span>
                    <span>/</span>
                    <span class="text-slate-400">Inventory</span>
                </nav>
                <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">Class Availability</h1>
                <p class="text-slate-500 mt-1 font-medium text-lg">Cek ketersediaan kursi real-time untuk penutupan penjualan.</p>
            </div>
            
            <div class="flex items-center gap-3">
                <button class="flex items-center gap-2 px-5 py-2.5 bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition font-bold text-sm text-slate-700">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                    Edit Capacity
                </button>
                <button class="flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition font-bold text-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v16m8-8H4"/></svg>
                    Add Batch
                </button>
            </div>
        </header>

        <!-- MODERN TOOLBAR -->
        <div class="flex flex-col md:flex-row gap-4 mb-8">
            <div class="relative flex-grow group">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-slate-400 group-focus-within:text-indigo-500 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                </div>
                <input x-model="search" type="text" placeholder="Cari nama kelas atau mentor..." class="w-full pl-11 pr-4 py-3 bg-white border border-slate-200 rounded-2xl focus:ring-4 focus:ring-indigo-50/50 focus:border-indigo-500 transition-all outline-none font-medium text-slate-600 shadow-sm">
            </div>
            
            <div class="flex items-center gap-3 bg-white p-1.5 rounded-2xl border border-slate-200 shadow-sm">
                <select x-model="filterType" class="bg-transparent pl-3 pr-8 py-2 text-sm font-bold text-slate-600 outline-none border-none">
                    <option value="All">All Types</option>
                    <option value="Offline">Offline</option>
                    <option value="Online">Online</option>
                    <option value="Private">Private</option>
                </select>
                <div class="w-[1px] h-6 bg-slate-200"></div>
                <select x-model="filterStatus" class="bg-transparent pl-3 pr-8 py-2 text-sm font-bold text-slate-600 outline-none border-none">
                    <option value="All">All Status</option>
                    <option value="Open">Available</option>
                    <option value="Almost Full">Almost Full</option>
                    <option value="Full">Sold Out</option>
                </select>
            </div>
        </div>

        <!-- ENHANCED LIST TABLE -->
        <div class="flex flex-col gap-3">
            <!-- Table Header -->
            <div class="px-8 py-3 flex items-center text-[11px] font-black uppercase tracking-[0.2em] text-slate-400">
                <div class="w-32 text-center">Available</div>
                <div class="flex-grow ml-4">Class Details</div>
                <div class="w-32 text-center">Type</div>
                <div class="w-48 text-center">Registration</div>
                <div class="w-32 text-right">Status</div>
            </div>

            <!-- List Rows -->
            <template x-for="item in filteredClasses" :key="item.id">
                <div 
                    class="row-transition bg-white border border-slate-200 rounded-[24px] p-2 flex items-center shadow-sm hover:shadow-xl hover:border-indigo-200 group"
                    :class="item.current_joined >= item.max_seat ? 'opacity-50 grayscale bg-slate-50' : ''"
                >
                    <!-- SEAT BADGE -->
                    <div class="w-32 h-24 flex flex-col items-center justify-center rounded-[20px] transition group-hover:scale-105"
                        :class="{
                            'bg-emerald-50 text-emerald-600': (item.max_seat - item.current_joined) > 2,
                            'bg-rose-50 text-rose-600': (item.max_seat - item.current_joined) <= 2 && (item.max_seat - item.current_joined) > 0,
                            'bg-slate-100 text-slate-400': (item.max_seat - item.current_joined) <= 0
                        }">
                        <span class="mono text-5xl leading-none font-bold" x-text="item.max_seat - item.current_joined"></span>
                        <span class="text-[10px] font-black uppercase mt-1 tracking-widest">Seats</span>
                    </div>

                    <!-- DETAILS -->
                    <div class="flex-grow px-6">
                        <div class="text-xl font-extrabold text-slate-800 mb-1 group-hover:text-indigo-600 transition" x-text="item.name"></div>
                        <div class="flex items-center gap-4 text-sm font-semibold">
                            <div class="flex items-center gap-1.5 text-slate-500">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                                <span x-text="item.start_date"></span>
                            </div>
                            <div class="flex items-center gap-1.5 text-indigo-500/80">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                                <span x-text="item.mentor_name"></span>
                            </div>
                        </div>
                    </div>

                    <!-- TYPE TAG -->
                    <div class="w-32 text-center">
                        <span class="px-4 py-1.5 rounded-full text-[11px] font-black uppercase tracking-wider shadow-sm border"
                            :class="{
                                'bg-orange-50 text-orange-600 border-orange-100': item.type === 'Offline',
                                'bg-blue-50 text-blue-600 border-blue-100': item.type === 'Online',
                                'bg-purple-50 text-purple-600 border-purple-100': item.type === 'Private'
                            }" x-text="item.type"></span>
                    </div>

                    <!-- UPDATE COUNTER -->
                    <div class="w-48 px-4 flex flex-col items-center gap-2">
                        <div class="flex items-center bg-slate-100 p-1 rounded-xl">
                            <button @click="updateJoined(item.id, -1)" class="w-8 h-8 flex items-center justify-center rounded-lg bg-white shadow-sm hover:bg-rose-500 hover:text-white transition group/btn">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M20 12H4"/></svg>
                            </button>
                            <div class="px-4 text-center">
                                <span class="mono font-bold text-slate-800" x-text="item.current_joined"></span>
                                <span class="text-slate-400 font-bold">/</span>
                                <span class="text-slate-400 font-bold text-xs" x-text="item.max_seat"></span>
                            </div>
                            <button @click="updateJoined(item.id, 1)" class="w-8 h-8 flex items-center justify-center rounded-lg bg-white shadow-sm hover:bg-emerald-500 hover:text-white transition">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4"/></svg>
                            </button>
                        </div>
                    </div>

                    <!-- STATUS -->
                    <div class="w-32 pr-8 text-right">
                        <template x-if="(item.max_seat - item.current_joined) <= 0">
                            <div class="text-xs font-black text-slate-400 uppercase tracking-widest leading-tight">Sold Out</div>
                        </template>
                        <template x-if="(item.max_seat - item.current_joined) > 0 && (item.max_seat - item.current_joined) <= 2">
                            <div class="flex flex-col items-end uppercase leading-tight">
                                <span class="text-[10px] font-black text-rose-500 tracking-[0.15em] animate-pulse italic">Hot Alert</span>
                                <span class="text-[11px] font-black text-slate-800 tracking-widest">Hampir Habis</span>
                            </div>
                        </template>
                        <template x-if="(item.max_seat - item.current_joined) > 2">
                            <div class="flex flex-col items-end uppercase leading-tight">
                                <span class="text-[10px] font-black text-emerald-500 tracking-[0.15em]">Ready to Sell</span>
                                <span class="text-[11px] font-black text-slate-800 tracking-widest">Open Batch</span>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
        </div>
    </main>

    <script>
        function classManager() {
            return {
                search: '',
                filterType: 'All',
                filterStatus: 'All',
                classes: [
                    { id: 1, name: 'First Class Offline - Jakarta', type: 'Offline', max_seat: 7, current_joined: 6, start_date: '10 Nov 2023', mentor_name: 'Coach Aris' },
                    { id: 2, name: 'Basic Plus Online - Batch 42', type: 'Online', max_seat: 10, current_joined: 10, start_date: '12 Nov 2023', mentor_name: 'Coach Devi' },
                    { id: 3, name: 'Private Class - Public Speaking', type: 'Private', max_seat: 1, current_joined: 0, start_date: 'Flexible', mentor_name: 'Coach Taufan' },
                    { id: 4, name: 'Advanced Presentation - Online', type: 'Online', max_seat: 12, current_joined: 4, start_date: '15 Nov 2023', mentor_name: 'Coach Aris' },
                    { id: 5, name: 'Kids Public Speaking - Offline', type: 'Offline', max_seat: 7, current_joined: 2, start_date: '20 Nov 2023', mentor_name: 'Coach Susi' },
                    { id: 6, name: 'First Class Offline - Bandung', type: 'Offline', max_seat: 7, current_joined: 7, start_date: '18 Nov 2023', mentor_name: 'Coach Galih' },
                ],

                updateJoined(id, delta) {
                    const cls = this.classes.find(c => c.id === id);
                    if (cls) {
                        const nextVal = cls.current_joined + delta;
                        if (nextVal >= 0 && nextVal <= cls.max_seat) {
                            cls.current_joined = nextVal;
                        }
                    }
                },

                get filteredClasses() {
                    return this.classes
                        .filter(c => {
                            const seatsLeft = c.max_seat - c.current_joined;
                            const status = seatsLeft === 0 ? 'Full' : (seatsLeft <= 2 ? 'Almost Full' : 'Open');
                            const typeMatch = this.filterType === 'All' || c.type === this.filterType;
                            const statusMatch = this.filterStatus === 'All' || status === this.filterStatus;
                            const searchMatch = c.name.toLowerCase().includes(this.search.toLowerCase()) || 
                                               c.mentor_name.toLowerCase().includes(this.search.toLowerCase());
                            return typeMatch && statusMatch && searchMatch;
                        })
                        .sort((a, b) => {
                            const sA = a.max_seat - a.current_joined;
                            const sB = b.max_seat - b.current_joined;
                            // Full classes at the bottom
                            if (sA === 0) return 1;
                            if (sB === 0) return -1;
                            return sA - sB;
                        });
                }
            }
        }
    </script>
</body>
</html>